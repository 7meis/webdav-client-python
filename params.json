{"name":"Webdavclient","tagline":"","body":"Webdavclient\r\n============\r\n\r\n[![PyPI\r\nversion](https://badge.fury.io/py/webdavclient.svg)](http://badge.fury.io/py/webdavclient)\r\n[![Requirements\r\nStatus](https://requires.io/github/designerror/webdavclient/requirements.svg?branch=master&style=flat)](https://requires.io/github/designerror/webdavclient/requirements/?branch=master&style=flat)\r\n[![PullReview\r\nstats](https://www.pullreview.com/github/designerror/webdavclient/badges/master.svg?)](https://www.pullreview.com/github/designerror/webdavclient/reviews/master)\r\n\r\n[![Supported Python versions](https://pypip.in/py_versions/webdavclient/badge.svg)](https://pypi.python.org/pypi/webdavclient/)\r\n[![License](https://pypip.in/license/webdavclient/badge.svg)](https://pypi.python.org/pypi/webdavclient/)\r\n\r\nПакет Webdavclient обеспечивает легкую и удобную работу с\r\nWebDAV-серверами (Яндекс.Диск, Dropbox, Google Диск, Box, 4shared и\r\nт.д.). В данный пакет включены следующие компоненты: webdav API,\r\nresource API и wdc.\r\n\r\nИсходный код проекта можно посмотреть\r\n[здесь](https://github.com/designerror/webdavclient)\r\n![Github](https://github.com/favicon.ico)\r\n\r\nУстановка и обновление\r\n======================\r\n\r\n**Установка**\r\n\r\nLinux\r\n\r\n```bash\r\n$ sudo apt-get install libxml2-dev libxslt-dev python-dev\r\n$ sudo apt-get install libcurl4-openssl-dev python-pycurl \r\n$ sudo easy_install webdavclient\r\n```\r\n\r\nMac OS X\r\n\r\n```bash\r\ncurl https://bootstrap.pypa.io/ez_setup.py -o - | python\r\npython setup.py install --prefix=/opt/setuptools\r\nsudo easy_install pip\r\n```\r\n\r\n**Обновление**\r\n\r\n```bash\r\n$ sudo pip install -U webdavclient\r\n```\r\n\r\nWebdav API\r\n==========\r\n\r\nWebdav API - представляет из себя набор webdav-методов работы с\r\nоблачными хранилищами. В этот набор входят следующие методы: check,\r\nfree, info, list, mkdir, clean, copy, move, download, upload, publish и\r\nunpublish.\r\n\r\n**Настройка клиента**\r\n\r\nОбязательными ключами для настройки соединения клиента с WevDAV-сервером\r\nявляются webdav\\_hostname и webdav\\_login, webdav\\_password.\r\n\r\n```python\r\nimport webdav.client as wc\r\noptions = {\r\n    'webdav_hostname': \"https://webdav.server.ru\",\r\n    'webdav_login': \"login\",\r\n    'webdav_password': \"password\"\r\n}\r\nclient = wc.Client(options)\r\n```\r\n\r\nПри наличие прокси-сервера необходимо указать настройки для подключения\r\nчерез него.\r\n\r\n```python\r\nimport webdav.client as wc\r\noptions = {\r\n    'webdav_hostname': \"https://webdav.server.ru\",\r\n    'webdav_login': \"w_login\",\r\n    'webdav_password': \"w_password\",\r\n    'proxy_hostname': \"http://127.0.0.1:8080\",\r\n    'proxy_login': \"p_login\",\r\n    'proxy_password': \"p_password\"\r\n}\r\nclient = wc.Client(options)\r\n```\r\n\r\nПри необходимости использования сертификата, путь к сертификату и\r\nприватному ключу задается следующим образом:\r\n\r\n```python\r\nimport webdav.client as wc\r\noptions = {\r\n    'webdav_hostname': \"https://webdav.server.ru\",\r\n    'webdav_login': \"w_login\",\r\n    'webdav_password': \"w_password\",\r\n    'cert_path': \"/etc/ssl/certs/certificate.crt\",\r\n    'key_path': \"/etc/ssl/private/certificate.key\"\r\n}\r\nclient = wc.Client(options)\r\n```\r\n\r\n**Синхронные методы**\r\n\r\nПроверка существования ресурса\r\n\r\n```python\r\nclient.check(\"dir1/file1\")\r\nclient.check(\"dir1\")\r\n```\r\n\r\nПолучение информации о ресурсе\r\n\r\n```python\r\nclient.info(\"dir1/file1\")\r\nclient.info(\"dir1/\")\r\n```\r\n\r\nПроверка свободного места\r\n\r\n```python\r\nfree_size = client.free()\r\n```\r\n\r\nПолучение списка ресурсов\r\n\r\n```python\r\nfiles1 = client.list()\r\nfiles2 = client.list(\"dir1\")\r\n```\r\n\r\nСоздание директории\r\n\r\n```python\r\nclient.mkdir(\"dir1/dir2\")\r\n```\r\n\r\nУдаление ресурса\r\n\r\n```python\r\nclient.clean(\"dir1/dir2\")\r\n```\r\n\r\nКопирование ресурса\r\n\r\n```python\r\nclient.copy(remote_path_from=\"dir1/file1\", remote_path_to=\"dir2/file1\")\r\nclient.copy(remote_path_from=\"dir2\", remote_path_to=\"dir3\")\r\n```\r\n\r\nПеремещения ресурса\r\n\r\n```python\r\nclient.move(remote_path_from=\"dir1/file1\", remote_path_to=\"dir2/file1\")\r\nclient.move(remote_path_from=\"dir2\", remote_path_to=\"dir3\")\r\n```\r\n\r\nЗагрузка ресурса\r\n\r\n```python\r\nclient.download_sync(remote_path=\"dir1/file1\", local_path=\"~/Downloads/file1\")\r\nclient.download_sync(remote_path=\"dir1/dir2/\", local_path=\"~/Downloads/dir2/\")\r\n```\r\n\r\nВыгрузка ресурса\r\n\r\n```python\r\nclient.upload_sync(remote_path=\"dir1/file1\", local_path=\"~/Documents/file1\")\r\nclient.upload_sync(remote_path=\"dir1/dir2/\", local_path=\"~/Documents/dir2/\")\r\n```\r\n\r\nПубликация ресурса\r\n\r\n```python\r\nlink = client.publish(\"dir1/file1\")\r\nlink = client.publish(\"dir2\")\r\n```\r\n\r\nОтмена публикации ресурса\r\n\r\n```python\r\nclient.unpublish(\"dir1/file1\")\r\nclient.unpublish(\"dir2\")\r\n```\r\n\r\nОбработка исключений\r\n\r\n```python\r\nfrom webdav.client import WebDavException\r\ntry:\r\n    ...\r\nexcept WebDavException as exception:\r\n    ...\r\n```\r\n\r\nПолучение недостающих файлов\r\n\r\n```python\r\nclient.pull(remote_directory='dir1', local_directory='~/Documents/dir1')\r\n```\r\n\r\nОтправка недостающих файлов\r\n\r\n```python\r\nclient.push(remote_directory='dir1', local_directory='~/Documents/dir1')\r\n```\r\n\r\n**Асинхронные методы**\r\n\r\nЗагрузка ресурса\r\n\r\n```python\r\nclient.download_async(remote_path=\"dir1/file1\", local_path=\"~/Downloads/file1\", callback=callback)\r\nclient.download_async(remote_path=\"dir1/dir2/\", local_path=\"~/Downloads/dir2/\", callback=callback)\r\n```\r\n\r\nВыгрузка ресурса\r\n\r\n```python\r\nclient.upload_async(remote_path=\"dir1/file1\", local_path=\"~/Documents/file1\", callback=callback)\r\nclient.upload_async(remote_path=\"dir1/dir2/\", local_path=\"~/Documents/dir2/\", callback=callback)\r\n```\r\n\r\nResource API\r\n============\r\n\r\nResource API - используя концепцию ООП, обеспечивает работу с облачными\r\nхранилищами на уровне ресурсов.\r\n\r\nПолучение ресурса\r\n\r\n```python\r\nres1 = client.resource(\"dir1/file1\")\r\n```\r\n\r\nРабота с ресурсом\r\n\r\n```python\r\nres1.rename(\"file2\")\r\n\r\nres1.move(\"dir1/file2\")\r\n\r\nres1.copy(\"dir2/file1\")\r\n\r\ninfo = res1.info()\r\n\r\nres1.read_from(buffer)\r\n\r\nres1.read(local_path=\"~/Documents/file1\")\r\n\r\nres1.read_async(local_path=\"~/Documents/file1\", callback)\r\n\r\nres1.write_to(buffer)\r\n\r\nres1.write(local_path=\"~/Downloads/file1\")\r\n\r\nres1.write_async(local_path=\"~/Downloads/file1\", callback)\r\n```\r\n\r\nwdc\r\n===\r\n\r\nwdc - кросплатформенная утилита, обеспечивающая удобную работу с\r\nWebDAV-серверами прямо из Вашей консоли. Помимо полной реализации\r\nметодов из webdav API, также добавлены методы синхронизации содержимого\r\nлокальной и удаленной директорий.\r\n\r\n**Аутентификация**\r\n\r\n```bash\r\n$ wdc login https://wedbav.server.ru -p http://127.0.0.1:8080\r\nwebdav_login: w_login\r\nwebdav_password: w_password\r\nproxy_login: p_login\r\nproxy_password: p_password\r\n```\r\n\r\nТакже имеются дополнительные ключи `--root[-r]`, `--cert-path[-c]` и `--key-path[-k]`.\r\n\r\n**Пример работы с утилитой**\r\n\r\n```bash\r\n$ wdc check\r\nsuccess\r\n$ wdc check file1\r\nnot success\r\n$ wdc free\r\n245234120344\r\n$ wdc ls dir1\r\nfile1\r\n...\r\nfileN\r\n$ wdc mkdir dir2\r\n$ wdc copy dir1/file1 -t dir2/file1\r\n$ wdc move dir2/file1 -t dir2/file2\r\n$ wdc download dir1/file1 -t ~/Downloads/file1\r\n$ wdc download dir1/ -t ~/Downloads/dir1/\r\n$ wdc upload dir2/file2 -f ~/Documents/file1\r\n$ wdc upload dir2/ -f ~/Documents/\r\n$ wdc publish di2/file2\r\nhttps://yadi.sk/i/vWtTUcBucAc6k\r\n$ wdc unpublish dir2/file2\r\n$ wdc pull dir1/ -t ~/Documents/dir1/\r\n$ wdc push dir1/ -f ~/Documents/dir1/\r\n$ wdc info dir1/file1\r\n{'name': 'file1', 'modified': 'Thu, 23 Oct 2014 16:16:37 GMT',\r\n'size': '3460064', 'created': '2014-10-23T16:16:37Z'}\r\n```\r\n\r\nWebDAV-сервера\r\n==============\r\n\r\n**Поддерживаемые методы**\r\n\r\nСервиры      |free|info|list|mkdir|clean|copy|move|download|upload \r\n:------------|:--:|:--:|:--:|:---:|:---:|:--:|:--:|:------:|:----:\r\nЯндекс.Диск  | \\+ | \\+ | \\+ | \\+  | \\+  | \\+ | \\+ |   \\+   |  \\+   \r\nDropbox      | \\- | \\+ | \\+ | \\+  | \\+  | \\+ | \\+ |   \\+   |  \\+   \r\nGoogle Диск  | \\- | \\+ | \\+ | \\+  | \\+  | \\- | \\- |   \\+   |  \\+   \r\nBox          | \\+ | \\+ | \\+ | \\+  | \\+  | \\- | \\- |   \\+   |  \\+   \r\n4shared      | \\- | \\+ | \\+ | \\+  | \\-  | \\- | \\+ |   \\+   |  \\+ \r\n\r\nМетоды publish и unpublish поддерживает только Яндекс.Диск.\r\n\r\n**Настройка подключения**\r\n\r\nДля работы с облачными хранилащами Dropbox и Google Диск по протоколу\r\nWebDAV необходимо использовать WebDAV-сервера DropDAV и DAV-pocket\r\nсоответственно.\r\n\r\nСписок настроек для WebDAV - серверов:\r\n\r\n```yml\r\nwebdav-servers:\r\n  - yandex:\r\n    hostname: https://webdav.yandex.ru\r\n    login:    #login_for_yandex\r\n    password: #pass_for_yandex\r\n  - dropbox:\r\n    hostname: https://dav.dropdav.com\r\n    login:    #login_for dropdav\r\n    password: #pass_for_dropdav\r\n  - google\r\n    hostname: https://dav-pocket.appspot.com/docs/\r\n    login:    #login_for_dav-pocket\r\n    password: #pass_for_dav-pocket\r\n  - box:\r\n    hostname: https://dav.box.com/dav\r\n    login:    #login_for_box\r\n    password: #pass_for_box\r\n  - 4shared:\r\n    hostname: https://webdav.4shared.com\r\n    login:    #login_for_4shared\r\n    password: #pass_for_4shared\r\n```\r\n\r\n**Включение autocomplete**\r\n\r\nДля Mac OS X или старых Unix-систем необходимо обновить bash.\r\n\r\n```bash\r\nbrew install bash\r\nchsh\r\nbrew install bash-completion\r\n```\r\n\r\nAutocomplete можно включить глобально\r\n\r\n```bash\r\nactivate-global-python-argcomplete --dest=path/to/bash_completion.d/\r\n```\r\n\r\nили локально\r\n\r\n```bash\r\n#.bashrc\r\neval \"$(register-python-argcomplete wdc)\"\r\n```\r\n\r\nБлагодарности\r\n===\r\nСпасибо компании`jetBrains` за\r\n\r\n  [![PyCharm](http://s28.postimg.org/o1td9nf3t/rsz_intellij_pycharm.png)](https://www.jetbrains.com/pycharm/)\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}